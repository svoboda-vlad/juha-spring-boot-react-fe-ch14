(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,a,t){e.exports=t(260)},110:function(e,a,t){},111:function(e,a,t){},260:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),o=t(15),c=t.n(o),l=(t(110),t(111),t(100)),i=t.n(l),s=t(101),u=t.n(s),m=t(58),d=t.n(m),h=t(23),f=t(20),b=t(21),E="https://juha-spring-boot-react-be-ch05.herokuapp.com/",C=t(16),p=t.n(C),v=t(18),O=t.n(v),g=t(96),y=t(97),j=t(104),w=t(103),S=t(102),T=(t(115),t(17)),k=(t(60),t(37)),I=t.n(k),N=t(40),P=t.n(N),W=t(39),B=t.n(W),L=t(38),M=t.n(L),A=function(e){var a=Object(n.useState)(!1),t=Object(b.a)(a,2),o=t[0],c=t[1],l=Object(n.useState)({brand:"",model:"",year:"",color:"",price:""}),i=Object(b.a)(l,2),s=i[0],u=i[1],m=function(){c(!1)},d=function(e){u(Object(f.a)(Object(f.a)({},s),{},Object(h.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(O.a,{variant:"outlined",color:"primary",style:{margin:10},onClick:function(){c(!0)}},"New Car"),r.a.createElement(I.a,{open:o,onClose:m},r.a.createElement(M.a,null,"New car"),r.a.createElement(B.a,null,r.a.createElement(p.a,{autoFocus:!0,fullWidth:!0,label:"Brand",name:"brand",value:s.brand,onChange:d}),r.a.createElement(p.a,{fullWidth:!0,label:"Model",name:"model",value:s.model,onChange:d}),r.a.createElement(p.a,{fullWidth:!0,label:"Color",name:"color",value:s.color,onChange:d}),r.a.createElement(p.a,{fullWidth:!0,label:"Year",name:"year",value:s.year,onChange:d}),r.a.createElement(p.a,{fullWidth:!0,label:"Price",name:"price",value:s.price,onChange:d})),r.a.createElement(P.a,null,r.a.createElement(O.a,{color:"secondary",onClick:m},"Cancel"),r.a.createElement(O.a,{color:"primary",onClick:function(){e.addCar(s),m()}},"Save"))))},_=function(e){var a=Object(n.useState)(!1),t=Object(b.a)(a,2),o=t[0],c=t[1],l=Object(n.useState)({brand:"",model:"",year:"",color:"",price:""}),i=Object(b.a)(l,2),s=i[0],u=i[1],m=function(){c(!1)},d=function(e){u(Object(f.a)(Object(f.a)({},s),{},Object(h.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(O.a,{color:"primary",size:"small",onClick:function(){u({brand:e.car.brand,model:e.car.model,color:e.car.color,year:e.car.year,fuel:e.car.fuel,price:e.car.price}),c(!0)}},"Edit"),r.a.createElement(I.a,{open:o,onClose:m},r.a.createElement(M.a,null,"Edit car"),r.a.createElement(B.a,null,r.a.createElement(p.a,{autoFocus:!0,fullWidth:!0,label:"Brand",name:"brand",value:s.brand,onChange:d}),r.a.createElement(p.a,{fullWidth:!0,label:"Model",name:"model",value:s.model,onChange:d}),r.a.createElement(p.a,{fullWidth:!0,label:"Color",name:"color",value:s.color,onChange:d}),r.a.createElement(p.a,{fullWidth:!0,label:"Year",name:"year",value:s.year,onChange:d}),r.a.createElement(p.a,{fullWidth:!0,label:"Price",name:"price",value:s.price,onChange:d})),r.a.createElement(P.a,null,r.a.createElement(O.a,{color:"secondary",onClick:m},"Cancel"),r.a.createElement(O.a,{color:"primary",onClick:function(){e.updateCar(s,e.link),m()}},"Save"))))},z=t(99),F=t(41),D=t.n(F),H=function(e){Object(j.a)(t,e);var a=Object(w.a)(t);function t(e){var n;return Object(g.a)(this,t),(n=a.call(this,e)).fetchCars=function(){var e=sessionStorage.getItem("jwt");fetch(E+"api/cars",{headers:{Authorization:e}}).then(function(e){return e.json()}).then(function(e){n.setState({cars:e._embedded.cars})}).catch(function(e){return console.error(e)})},n.onDelClick=function(e){if(window.confirm("Are you sure to delete?")){var a=sessionStorage.getItem("jwt");fetch(e,{method:"DELETE",headers:{Authorization:a}}).then(function(e){T.b.success("Car deleted",{position:T.b.POSITION.BOTTOM_LEFT}),n.fetchCars()}).catch(function(e){T.b.error("Error when deleting",{position:T.b.POSITION.BOTTOM_LEFT}),console.error(e)})}},n.state={cars:[]},n}return Object(y.a)(t,[{key:"componentDidMount",value:function(){this.fetchCars()}},{key:"addCar",value:function(e){var a=this,t=sessionStorage.getItem("jwt");fetch(E+"api/cars",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e)}).then(function(e){return a.fetchCars()}).catch(function(e){return console.error(e)})}},{key:"updateCar",value:function(e,a){var t=this,n=sessionStorage.getItem("jwt");fetch(a,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify(e)}).then(function(e){T.b.success("Changes saved",{position:T.b.POSITION.BOTTOM_LEFT}),t.fetchCars()}).catch(function(e){return T.b.error("Error when saving",{position:T.b.POSITION.BOTTOM_LEFT})})}},{key:"render",value:function(){var e=this,a=[{Header:"Brand",accessor:"brand"},{Header:"Model",accessor:"model"},{Header:"Color",accessor:"color"},{Header:"Year",accessor:"year"},{Header:"Price \u20ac",accessor:"price"},{sortable:!1,filterable:!1,width:100,accessor:"_links.self.href",Cell:function(a){var t=a.value,n=a.row;return r.a.createElement(_,{car:n,link:t,updateCar:e.updateCar,fetchCars:e.fetchCars})}},{sortable:!1,filterable:!1,width:100,accessor:"_links.self.href",Cell:function(a){var t=a.value;return r.a.createElement(O.a,{size:"small",color:"secondary",onClick:function(){e.onDelClick(t)}},"Delete")}}];return r.a.createElement("div",{className:"App"},r.a.createElement(D.a,{container:!0},r.a.createElement(D.a,{item:!0},r.a.createElement(A,{addCar:this.addCar,fetchCars:this.fetchCars})),r.a.createElement(D.a,{item:!0,style:{padding:15}},r.a.createElement(z.CSVLink,{data:this.state.cars,separator:";"},"Export CSV"))),r.a.createElement(S.a,{data:this.state.cars,columns:a,filterable:!0}),r.a.createElement(T.a,{autoClose:1500}))}}]),t}(n.Component),J=function(){var e=Object(n.useState)({username:"",password:""}),a=Object(b.a)(e,2),t=a[0],o=a[1],c=Object(n.useState)(!1),l=Object(b.a)(c,2),i=l[0],s=l[1],u=function(e){o(Object(f.a)(Object(f.a)({},t),{},Object(h.a)({},e.target.name,e.target.value)))};return!0===i?r.a.createElement(H,null):r.a.createElement("div",null,r.a.createElement(p.a,{name:"username",label:"Username",onChange:u}),r.a.createElement("br",null),r.a.createElement(p.a,{type:"password",name:"password",label:"Password",onChange:u}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(O.a,{variant:"outlined",color:"primary",onClick:function(){fetch(E+"login",{method:"POST",body:JSON.stringify(t)}).then(function(e){var a=e.headers.get("Authorization");null!==a?(sessionStorage.setItem("jwt",a),s(!0)):T.b.warn("Check your username and password",{position:T.b.POSITION.BOTTOM_LEFT})}).catch(function(e){return console.error(e)})}},"Login"),r.a.createElement(T.a,{autoClose:1500}))};var Y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{position:"static",color:"default"},r.a.createElement(u.a,null,r.a.createElement(d.a,{variant:"h6",color:"inherit"},"CarList"))),r.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[105,1,2]]]);
//# sourceMappingURL=main.efe371e2.chunk.js.map